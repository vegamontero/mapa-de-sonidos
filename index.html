<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Mapa de sonidos</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet/dist/leaflet.css"
  />
  <style>
    #map { height: 90vh; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([40.0, -4.0], 6);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    const puntos = [
      { coords: [41.960275488671954, 3.054729149911599], titulo: 'Campanas', audioSrc: 'audio/campanas MAPA DE SONIDOS.mp3' },
      { coords: [41.92152401292054, 3.215654367328217], titulo: 'Playa', audioSrc: 'audio/aiguaxelidamapadesonidos.mp3' },
      { coords: [42.213867, 2.510166], titulo: 'Salt d'aigua', audioSrc: 'audio/saltdaiguamapadesonidos.mp3' },
      { coords: [-30.874922, -64.536207], titulo: 'Tormenta', audioSrc: 'audio/tormentacapilladelmontemapadesonidos.mp3' },
      { coords: [27.800992, -16.866002], titulo: 'Ballenas piloto', audioSrc: 'audio/ballenaspilotomapadesonidos.mp3' },
      { coords: [27.800992, -16.866002], titulo: 'Río', audioSrc: 'audio/rioalmenaradetormesmapadesonidos.mp3' },
      { coords: [-30.886437, -64.544319], titulo: 'Río', audioSrc: 'audio/riocapilladelmontemapadesonidos' },
      { coords: [41.974228, 3.112794], titulo: 'Pájaros', audioSrc: 'audio/ocellspalausatormapadesonidos.mp3' },
      { coords: [41.929157, 3.005759], titulo: 'Ranas', audioSrc: 'audio/ranitasmapadesonidos.mp3' },
    ];

    let currentAudio = null;

    puntos.forEach(({ coords, titulo, audioSrc }) => {
      const marker = L.marker(coords).addTo(map).bindPopup(titulo);

      marker.on('click', () => {
        if (currentAudio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
        currentAudio = new Audio(audioSrc);
        currentAudio.play().catch(err => {
          console.error('Error reproduciendo audio:', err);
        });
      });
    });
  </script>
</body>
</html>
