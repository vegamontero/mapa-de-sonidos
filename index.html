<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Mapa de sonidos</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet/dist/leaflet.css"
  />
  <style>
    #map { height: 90vh; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([40.0, -4.0], 6);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    const puntos = [
      { coords: [40.4168, -3.7038], titulo: 'Campanas', audioSrc: 'audio/campana.mp3' },
      { coords: [43.3623, -8.4115], titulo: 'Mar', audioSrc: 'audio/mar.mp3' },
      { coords: [39.4699, -0.3763], titulo: 'Viento', audioSrc: 'audio/viento.mp3' }
    ];

    let currentAudio = null;

    puntos.forEach(({ coords, titulo, audioSrc }) => {
      const marker = L.marker(coords).addTo(map).bindPopup(titulo);

      marker.on('click', () => {
        if (currentAudio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
        currentAudio = new Audio(audioSrc);
        currentAudio.play().catch(err => {
          console.error('Error reproduciendo audio:', err);
        });
      });
    });
  </script>
</body>
</html>
